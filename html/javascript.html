<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <style>
      .background {
        background-color: #f7f7f7;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 90vh;
      }
    </style>
  </head>
  <body>
    <!-- import outer js file -->
    <script src="./html.js"></script>

    <!-- inner js: event -->
    <button id="click">Click!</button>
    <script>
      const btn = document.querySelector("#click");
      btn.addEventListener("click", function (event) {
        const div = document.querySelector("#container");
        div.innerHTML = "<h1>Clicked!</h1>";
      });
    </script>

    <!-- inner js: useage 1 -->
    <div class="background">
      <img id="dino" width="100px" height="100px"
        src="https://is4-ssl.mzstatic.com/image/thumb/Purple118/v4/88/e5/36/88e536d4-8a08-7c3b-ad29-c4e5dabc9f45/AppIcon-1x_U007emarketing-sRGB-85-220-0-6.png/246x0w.jpg"
        alt="dino" />
    </div>
    <script>
      const dino = document.querySelector("#dino");
      const background = document
        .querySelector(".background")
        .getBoundingClientRect();

      let x = 0;
      let y = 0;

      dino.addEventListener("click", function (e) {
        console.log("auch!");
      });

      document.addEventListener("keydown", (e) => {
        if (e.code === "ArrowLeft") {
          x -= 50;
          dino.style.marginLeft = `${x}px`;
        } else if (e.code === "ArrowRight") {
          x += 50;
          dino.style.marginLeft = `${x}px`;
        } else if (e.code === "ArrowUp") {
          y -= 50;
          dino.style.marginTop = `${y}px`;
        } else if (e.code === "ArrowDown") {
          y += 50;
          dino.style.marginTop = `${y}px`;
        }

        if (x + background.width < 0 || x > background.width) {
          x = 0;
        }
        if (y + background.height < 0 || y > background.height) {
          y = 0;
        }
      });
    </script>

    <!-- inner js: useage 2 -->
    <h1>Shopping List</h1>
    <input id="item-input" type="text" />
    <button id="add-button">Add</button>
    <button id="del-button">Delete</button>
    <ul id="shopping-list"></ul>
    <script>
      const input = document.querySelector("#item-input");
      const addButton = document.querySelector("#add-button");
      const delButton = document.querySelector("#del-button");
      const ul = document.querySelector("#shopping-list");

      addButton.addEventListener("click", function (e) {
        const itemValue = input.value;
        input.value = "";

        const tag = document.createElement("li");
        tag.innerText = itemValue;

        ul.appendChild(tag);

        tag.addEventListener("click", function (e) {
          if (tag.style.textDecoration === "") {
            tag.style.textDecoration = "line-through";
          } else {
            tag.style.textDecoration = "";
          }
        });

        const deleteBtn = document.createElement("button");
        deleteBtn.innerText = "Delete";

        tag.appendChild(deleteBtn);

        deleteBtn.addEventListener("click", function (e) {
          tag.remove();
        });
      });

      delButton.addEventListener("click", function (e) {
        ul.innerHTML = "";
      });
    </script>

    <!-- inner js: useage 3 -->
    <div id="map" style="width: 100%; height: 720px"></div>
    <button id="center">Center!</button>
    <script type="text/javascript"
      src="http://dapi.kakao.com/v2/maps/sdk.js?appkey=6edf40f72cba490f7ecc8cbbef55c0d1"></script>
    <script src="./kakaomap.js"></script>
    <script>
      const container = document.querySelector("#map");
      const options = {
        center: new kakao.maps.LatLng(35.20551, 126.811551),
        level: 3,
      };

      const map = new kakao.maps.Map(container, options);
      const markers = [];
      let centerMarker;

      kakao.maps.event.addListener(map, "click", function (e) {
        createMarker(e.latLng);
      });

      const createMarker = (position) => {
        const newMarker = new kakao.maps.Marker({
          map,
          position,
        });

        markers.push(newMarker);
        newMarker.setMap(map);

        if (markers.length > 3) {
          markers[0].setMap(null);
          markers.shift();
        }
      };

      const button = document.querySelector("#center");
      button.addEventListener("click", (e) => {
        if (markers.length === 3) {
          const center = circumcenter([
            [markers[0].getPosition().Ma, markers[0].getPosition().La],
            [markers[1].getPosition().Ma, markers[1].getPosition().La],
            [markers[2].getPosition().Ma, markers[2].getPosition().La],
          ]);
          const position = new kakao.maps.LatLng(center[0], center[1]);

          if (centerMarker) {
            centerMarker.setMap(null);
          }
          centerMarker = new kakao.maps.Marker({
            map,
            position,
          });
        } else {
          console.log("Add markers more than 3.");
        }
      });
    </script>
  </body>
</html>
